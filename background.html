<html>
  <head>
    <script type="text/javascript" src="format.js"></script>
    <script type="text/javascript" src="options.js"></script>
    <script type="text/javascript">
      var lastClicked = {};
      chrome.extension.onRequest.addListener(function (msg, sender, sendResponse) {
            // close the previous connection
            // in cases where user right-clicked, but didn't copy link text
            // if we right-click somewhere (for another reason) then close the tab
            // we end up trying to use a disconnected port object which breaks the extension entirely
            // so leave off for now
            // TODO: figure out how to cleanup
            // if ( lastClicked["callback"] ) lastClicked["callback"]();

            lastClicked["callback"] = sendResponse;
            lastClicked["message"] = msg;
      });

      init_context_menus();
    </script>
  </head>
  <body>
    <textarea id="tmp-clipboard"></textarea>
  </body>
</html>
